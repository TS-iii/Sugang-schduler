{"ast":null,"code":"export class Node {\n  constructor(data) {\n    this.data = data;\n    this.children = [];\n    this.adault = null;\n    this.score = 0;\n    this.maxrootlist = [];\n  }\n\n  insert(data) {\n    const node = new Node(data);\n    node.adault = this;\n    node.score = node.adault.score + data.classscore; // 누적 학점\n\n    this.children.push(node);\n    node.num = this.children.length - 1;\n  }\n\n} //둘의 시간이 겹치는지 확인\n//안겹치면 true 반환\n// 시간표를 넘겨줘야함\n\nexport const lookschedule = function (a, b) {\n  if (a.t1.length && b.t1.length) {\n    for (let i = 0; i < a.t1.length; i++) {\n      if (b.t1.indexOf(a.t1[i]) !== -1) return false;\n    }\n  }\n\n  if (a.t2.length && b.t2.length) {\n    for (let i = 0; i < a.t2.length; i++) {\n      if (b.t2.indexOf(a.t2[i]) !== -1) return false;\n    }\n  }\n\n  if (a.t3.length && b.t3.length) {\n    for (let i = 0; i < a.t3.length; i++) {\n      if (b.t3.indexOf(a.t3[i]) !== -1) return false;\n    }\n  }\n\n  if (a.t4.length && b.t4.length) {\n    for (let i = 0; i < a.t4.length; i++) {\n      if (b.t4.indexOf(a.t4[i]) !== -1) return false;\n    }\n  }\n\n  if (a.t5.length && b.t5.length) {\n    for (let i = 0; i < a.t5.length; i++) {\n      if (b.t5.indexOf(a.t5[i]) !== -1) return false;\n    }\n  }\n\n  return true;\n}; // 안겹친다는 가정이 필요\n// 안겹치고 이 함수를 사용하면 dst 시간표에 src가 추가됨. \n// 시간표와, 시간표에 넣을 과목을 dst, src 차례로 주면됨\n\nexport const insertTable = function (dst, src) {\n  for (let i = 0; i < src.keyword.length; i++) {\n    dst[src.keyword[i]] = dst[src.keyword[i]].concat(src[src.keyword[i]]);\n  }\n\n  ;\n};\nexport const composeTree = function (t, table, banlist, rootdata = null) {\n  const root = new Node(rootdata);\n  root.max = 0;\n  root.maxScore = 0;\n  root.finalTable = []; // //실패시 대안 루트 만들어줌.\n  // if(rootdata!==null){\n  //     root.idlist=[];\n  //     root.idlist.push(rootdata.id);\n  //     root.playlist=[]; // type1,2,3 가능한것들  \n  //     for(let i=0;i<table.type1.length;i++){\n  //         let t=0;\n  //         if(table.type1[i].id===rootdata.id)\n  //             continue;\n  //         for( let j=0;j<banlist.length;j++){\n  //             if(banlist[j].data.classname!==table.type1[i].classname)\n  //             {\n  //                 if(lookschedule(banlist[j].data.classtime,table.type1[i].classtime))\n  //                    {\n  //                         t++;\n  //                    }\n  //             }\n  //         }\n  //         if(t===banlist.length)\n  //             {\n  //                 root.insert(table.type1[i]);\n  //                 root.playlist.push(table.type1[i]);\n  //             }\n  //     }\n  //     for(let i=0;i<table.type2.length;i++){\n  //         let t=0;\n  //         if(table.type2[i].id===rootdata.id)\n  //             continue;\n  //         for( let j=0;j<banlist.length;j++){\n  //             if(banlist[j].data.classname!==table.type2[i].classname)\n  //             {\n  //                 if(lookschedule(banlist[j].data.classtime,table.type2[i].classtime))\n  //                    {\n  //                         t++;\n  //                    }\n  //             }\n  //         }\n  //         if(t===banlist.length)\n  //             {\n  //                 root.insert(table.type2[i]);\n  //                 root.playlist.push(table.type2[i]);\n  //             }\n  //     }\n  //     for(let i=0;i<table.type3.length;i++){\n  //         let t=0;\n  //         if(table.type3[i].id===rootdata.id)\n  //             continue;\n  //         for( let j=0;j<banlist.length;j++){\n  //             if(banlist[j].data.classname!==table.type3[i].classname)\n  //             {\n  //                 if(lookschedule(banlist[j].data.classtime,table.type3[i].classtime))\n  //                    {\n  //                         t++;\n  //                    }\n  //             }\n  //         }\n  //         if(t===banlist.length)\n  //             {   \n  //                 root.insert(table.type3[i]);\n  //                 root.playlist.push(table.type3[i]);\n  //             }\n  //     }\n  //     for(let i=0;i<root.children.length;i++){\n  //         search(root.children[i],2,root,true);\n  //     }\n  // } //rootdata!==null 끝 \n  // else {\n\n  if (t === 'type1') {\n    //루트 바로 밑 1번째 자식들 구성\n    for (let i = 0; i < table.type1.length; i++) {\n      root.insert(table.type1[i]);\n    }\n\n    for (let i = 0; i < table.type1.length; i++) {\n      search(root.children[i], 1, root);\n    }\n  } else if (t === 'type2') {\n    for (let i = 0; i < table.type2.length; i++) {\n      if (banlist.length === 0) root.insert(table.type2[i]);else {\n        let t = 0;\n\n        for (let j = 0; j < banlist.length; j++) {\n          if (banlist[j].data.classname !== table.type2[i].classname) {\n            if (lookschedule(banlist[j].data.classtime, table.type2[i].classtime)) {\n              t++;\n            }\n          }\n        }\n\n        if (t === banlist.length) root.insert(table.type2[i]);\n      }\n    }\n\n    for (let i = 0; i < root.children.length; i++) {\n      search(root.children[i], 1, root);\n    }\n  } else if (t === 'type3') {\n    for (let i = 0; i < table.type3.length; i++) {\n      if (banlist.length === 0) root.insert(table.type3[i]);else {\n        let t = 0;\n\n        for (let j = 0; j < banlist.length; j++) {\n          if (banlist[j].data.classname !== table.type3[i].classname) {\n            if (lookschedule(banlist[j].data.classtime, table.type3[i].classtime)) {\n              t++;\n            }\n          }\n        }\n\n        if (t === banlist.length) root.insert(table.type3[i]);\n      }\n    }\n\n    for (let i = 0; i < root.children.length; i++) {\n      search(root.children[i], 1, root);\n    } // }\n\n  }\n\n  for (let i = 0; i < root.finalTable.length; i++) {\n    let n = root.finalTable[i];\n\n    if (n.deep === root.max) {\n      root.maxrootlist.push(n);\n    }\n  }\n\n  return root;\n};\nexport const search = function (n, k, root, tf = false, banlist) {\n  let num = 0;\n\n  for (let i = n.num + 1; i < n.adault.children.length; i++) {\n    if (n.data.classname !== n.adault.children[i].data.classname) {\n      if (lookschedule(n.data.classtime, n.adault.children[i].data.classtime)) {\n        n.insert(n.adault.children[i].data);\n        num++;\n      }\n    }\n  }\n\n  ;\n\n  if (num === 0) //지금 이 노드가 leaf라는 소리\n    {\n      if (root.max < k) root.max = k;\n      if (root.maxScore < n.score) root.maxScore = n.score;\n      n.deep = k; // 리프는 root->자기로 향하는 노드들의 리스트를 따로 저장함.\n\n      n.list = [];\n      let tempn = n;\n\n      for (let j = 0; j < n.deep; j++) {\n        n.list.push(tempn);\n        tempn = tempn.adault;\n      }\n\n      root.finalTable.push(n);\n      return;\n    } else {\n    for (let i = 0; i < num; i++) {\n      search(n.children[i], k + 1, root);\n    }\n  }\n};\nexport default Node;","map":{"version":3,"sources":["C:/Users/user/Desktop/ReactProject/sugang-scheduler/sugang-frontend/src/lib/tree/tree.js"],"names":["Node","constructor","data","children","adault","score","maxrootlist","insert","node","classscore","push","num","length","lookschedule","a","b","t1","i","indexOf","t2","t3","t4","t5","insertTable","dst","src","keyword","concat","composeTree","t","table","banlist","rootdata","root","max","maxScore","finalTable","type1","search","type2","j","classname","classtime","type3","n","deep","k","tf","list","tempn"],"mappings":"AAGA,OAAO,MAAMA,IAAN,CAAW;AAEdC,EAAAA,WAAW,CAACC,IAAD,EAAM;AAEb,SAAKA,IAAL,GAAUA,IAAV;AACA,SAAKC,QAAL,GAAc,EAAd;AACA,SAAKC,MAAL,GAAY,IAAZ;AACA,SAAKC,KAAL,GAAW,CAAX;AACA,SAAKC,WAAL,GAAiB,EAAjB;AAEH;;AAGFC,EAAAA,MAAM,CAACL,IAAD,EAAM;AAEX,UAAMM,IAAI,GAAC,IAAIR,IAAJ,CAASE,IAAT,CAAX;AACAM,IAAAA,IAAI,CAACJ,MAAL,GAAY,IAAZ;AAEAI,IAAAA,IAAI,CAACH,KAAL,GAAWG,IAAI,CAACJ,MAAL,CAAYC,KAAZ,GAAkBH,IAAI,CAACO,UAAlC,CALW,CAKoC;;AAE/C,SAAKN,QAAL,CAAcO,IAAd,CAAmBF,IAAnB;AACAA,IAAAA,IAAI,CAACG,GAAL,GAAS,KAAKR,QAAL,CAAcS,MAAd,GAAqB,CAA9B;AAIA;;AAzBc,C,CAkClB;AACA;AACA;;AACA,OAAO,MAAMC,YAAY,GAAE,UAASC,CAAT,EAAWC,CAAX,EAAa;AAEpC,MAAGD,CAAC,CAACE,EAAF,CAAKJ,MAAL,IAAeG,CAAC,CAACC,EAAF,CAAKJ,MAAvB,EACI;AACQ,SAAI,IAAIK,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACH,CAAC,CAACE,EAAF,CAAKJ,MAAnB,EAA0BK,CAAC,EAA3B,EAA8B;AAE1B,UAAGF,CAAC,CAACC,EAAF,CAAKE,OAAL,CAAaJ,CAAC,CAACE,EAAF,CAAKC,CAAL,CAAb,MAAwB,CAAC,CAA5B,EACI,OAAO,KAAP;AAEP;AAER;;AAEL,MAAGH,CAAC,CAACK,EAAF,CAAKP,MAAL,IAAeG,CAAC,CAACI,EAAF,CAAKP,MAAvB,EACA;AACQ,SAAI,IAAIK,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACH,CAAC,CAACK,EAAF,CAAKP,MAAnB,EAA0BK,CAAC,EAA3B,EAA8B;AAE1B,UAAGF,CAAC,CAACI,EAAF,CAAKD,OAAL,CAAaJ,CAAC,CAACK,EAAF,CAAKF,CAAL,CAAb,MAAwB,CAAC,CAA5B,EACI,OAAO,KAAP;AAEP;AACR;;AAED,MAAGH,CAAC,CAACM,EAAF,CAAKR,MAAL,IAAeG,CAAC,CAACK,EAAF,CAAKR,MAAvB,EACA;AACQ,SAAI,IAAIK,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACH,CAAC,CAACM,EAAF,CAAKR,MAAnB,EAA0BK,CAAC,EAA3B,EAA8B;AAE1B,UAAGF,CAAC,CAACK,EAAF,CAAKF,OAAL,CAAaJ,CAAC,CAACM,EAAF,CAAKH,CAAL,CAAb,MAAwB,CAAC,CAA5B,EACI,OAAO,KAAP;AAEP;AACR;;AAED,MAAGH,CAAC,CAACO,EAAF,CAAKT,MAAL,IAAeG,CAAC,CAACM,EAAF,CAAKT,MAAvB,EACA;AACQ,SAAI,IAAIK,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACH,CAAC,CAACO,EAAF,CAAKT,MAAnB,EAA0BK,CAAC,EAA3B,EAA8B;AAE1B,UAAGF,CAAC,CAACM,EAAF,CAAKH,OAAL,CAAaJ,CAAC,CAACO,EAAF,CAAKJ,CAAL,CAAb,MAAwB,CAAC,CAA5B,EACI,OAAO,KAAP;AAEP;AAER;;AAED,MAAGH,CAAC,CAACQ,EAAF,CAAKV,MAAL,IAAeG,CAAC,CAACO,EAAF,CAAKV,MAAvB,EACA;AACQ,SAAI,IAAIK,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACH,CAAC,CAACQ,EAAF,CAAKV,MAAnB,EAA0BK,CAAC,EAA3B,EAA8B;AAE1B,UAAGF,CAAC,CAACO,EAAF,CAAKJ,OAAL,CAAaJ,CAAC,CAACQ,EAAF,CAAKL,CAAL,CAAb,MAAwB,CAAC,CAA5B,EACI,OAAO,KAAP;AAEP;AAER;;AAGD,SAAO,IAAP;AAIH,CA5DM,C,CAgEP;AACA;AACA;;AACA,OAAO,MAAMM,WAAW,GAAC,UAASC,GAAT,EAAaC,GAAb,EAAiB;AAGtC,OAAI,IAAIR,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACQ,GAAG,CAACC,OAAJ,CAAYd,MAA1B,EAAiCK,CAAC,EAAlC,EAAqC;AAEjCO,IAAAA,GAAG,CAACC,GAAG,CAACC,OAAJ,CAAYT,CAAZ,CAAD,CAAH,GAAoBO,GAAG,CAACC,GAAG,CAACC,OAAJ,CAAYT,CAAZ,CAAD,CAAH,CAAoBU,MAApB,CAA2BF,GAAG,CAACA,GAAG,CAACC,OAAJ,CAAYT,CAAZ,CAAD,CAA9B,CAApB;AAEH;;AAAA;AAGJ,CAVM;AAaP,OAAO,MAAMW,WAAW,GAAC,UAASC,CAAT,EAAWC,KAAX,EAAiBC,OAAjB,EAAyBC,QAAQ,GAAC,IAAlC,EAAuC;AAG5D,QAAMC,IAAI,GAAE,IAAIjC,IAAJ,CAASgC,QAAT,CAAZ;AAEAC,EAAAA,IAAI,CAACC,GAAL,GAAS,CAAT;AACAD,EAAAA,IAAI,CAACE,QAAL,GAAc,CAAd;AAEAF,EAAAA,IAAI,CAACG,UAAL,GAAgB,EAAhB,CAR4D,CAU5D;AACA;AAEA;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAGA;AAIA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAGA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAGA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAGA;AAIA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAGA;AAEA;AAEA;AAIA;AAGA;;AACA,MAAGP,CAAC,KAAG,OAAP,EACI;AACJ;AACA,SAAI,IAAIZ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACa,KAAK,CAACO,KAAN,CAAYzB,MAA1B,EAAiCK,CAAC,EAAlC,EAAqC;AAEjCgB,MAAAA,IAAI,CAAC1B,MAAL,CAAYuB,KAAK,CAACO,KAAN,CAAYpB,CAAZ,CAAZ;AAEH;;AAGD,SAAI,IAAIA,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACa,KAAK,CAACO,KAAN,CAAYzB,MAA1B,EAAiCK,CAAC,EAAlC,EAAqC;AAEjCqB,MAAAA,MAAM,CAACL,IAAI,CAAC9B,QAAL,CAAcc,CAAd,CAAD,EAAkB,CAAlB,EAAoBgB,IAApB,CAAN;AAEH;AAGI,GAjBL,MAmBK,IAAGJ,CAAC,KAAG,OAAP,EAAe;AAIhB,SAAI,IAAIZ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACa,KAAK,CAACS,KAAN,CAAY3B,MAA1B,EAAiCK,CAAC,EAAlC,EAAqC;AAEjC,UAAGc,OAAO,CAACnB,MAAR,KAAiB,CAApB,EACIqB,IAAI,CAAC1B,MAAL,CAAYuB,KAAK,CAACS,KAAN,CAAYtB,CAAZ,CAAZ,EADJ,KAGK;AACD,YAAIY,CAAC,GAAC,CAAN;;AAEA,aAAK,IAAIW,CAAC,GAAC,CAAX,EAAaA,CAAC,GAACT,OAAO,CAACnB,MAAvB,EAA8B4B,CAAC,EAA/B,EAAkC;AAE9B,cAAGT,OAAO,CAACS,CAAD,CAAP,CAAWtC,IAAX,CAAgBuC,SAAhB,KAA4BX,KAAK,CAACS,KAAN,CAAYtB,CAAZ,EAAewB,SAA9C,EACA;AACI,gBAAG5B,YAAY,CAACkB,OAAO,CAACS,CAAD,CAAP,CAAWtC,IAAX,CAAgBwC,SAAjB,EAA2BZ,KAAK,CAACS,KAAN,CAAYtB,CAAZ,EAAeyB,SAA1C,CAAf,EACG;AACKb,cAAAA,CAAC;AAEL;AAGP;AAGJ;;AAED,YAAGA,CAAC,KAAGE,OAAO,CAACnB,MAAf,EACIqB,IAAI,CAAC1B,MAAL,CAAYuB,KAAK,CAACS,KAAN,CAAYtB,CAAZ,CAAZ;AAKP;AAGJ;;AAKD,SAAI,IAAIA,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACgB,IAAI,CAAC9B,QAAL,CAAcS,MAA5B,EAAmCK,CAAC,EAApC,EAAuC;AAEnCqB,MAAAA,MAAM,CAACL,IAAI,CAAC9B,QAAL,CAAcc,CAAd,CAAD,EAAkB,CAAlB,EAAoBgB,IAApB,CAAN;AAEH;AAIJ,GAlDI,MAoDA,IAAGJ,CAAC,KAAG,OAAP,EAAe;AAEhB,SAAI,IAAIZ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACa,KAAK,CAACa,KAAN,CAAY/B,MAA1B,EAAiCK,CAAC,EAAlC,EAAqC;AAGjC,UAAGc,OAAO,CAACnB,MAAR,KAAiB,CAApB,EACAqB,IAAI,CAAC1B,MAAL,CAAYuB,KAAK,CAACa,KAAN,CAAY1B,CAAZ,CAAZ,EADA,KAGC;AACD,YAAIY,CAAC,GAAC,CAAN;;AAEA,aAAK,IAAIW,CAAC,GAAC,CAAX,EAAaA,CAAC,GAACT,OAAO,CAACnB,MAAvB,EAA8B4B,CAAC,EAA/B,EAAkC;AAE9B,cAAGT,OAAO,CAACS,CAAD,CAAP,CAAWtC,IAAX,CAAgBuC,SAAhB,KAA4BX,KAAK,CAACa,KAAN,CAAY1B,CAAZ,EAAewB,SAA9C,EACA;AACI,gBAAG5B,YAAY,CAACkB,OAAO,CAACS,CAAD,CAAP,CAAWtC,IAAX,CAAgBwC,SAAjB,EAA2BZ,KAAK,CAACa,KAAN,CAAY1B,CAAZ,EAAeyB,SAA1C,CAAf,EACG;AACKb,cAAAA,CAAC;AAEL;AAGP;AAGJ;;AAED,YAAGA,CAAC,KAAGE,OAAO,CAACnB,MAAf,EACIqB,IAAI,CAAC1B,MAAL,CAAYuB,KAAK,CAACa,KAAN,CAAY1B,CAAZ,CAAZ;AAKP;AAIA;;AAID,SAAI,IAAIA,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACgB,IAAI,CAAC9B,QAAL,CAAcS,MAA5B,EAAmCK,CAAC,EAApC,EAAuC;AAEnCqB,MAAAA,MAAM,CAACL,IAAI,CAAC9B,QAAL,CAAcc,CAAd,CAAD,EAAkB,CAAlB,EAAoBgB,IAApB,CAAN;AAEH,KA7Ce,CAgDpB;;AAEC;;AAED,OAAI,IAAIhB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACgB,IAAI,CAACG,UAAL,CAAgBxB,MAA9B,EAAqCK,CAAC,EAAtC,EAAyC;AAGrC,QAAI2B,CAAC,GAACX,IAAI,CAACG,UAAL,CAAgBnB,CAAhB,CAAN;;AAEA,QAAG2B,CAAC,CAACC,IAAF,KAASZ,IAAI,CAACC,GAAjB,EAAqB;AAEjBD,MAAAA,IAAI,CAAC3B,WAAL,CAAiBI,IAAjB,CAAsBkC,CAAtB;AACH;AAEJ;;AAGL,SAAOX,IAAP;AAEC,CA1QM;AA4QP,OAAO,MAAMK,MAAM,GAAC,UAASM,CAAT,EAAWE,CAAX,EAAab,IAAb,EAAkBc,EAAE,GAAC,KAArB,EAA2BhB,OAA3B,EAAmC;AAGnD,MAAIpB,GAAG,GAAC,CAAR;;AAIA,OAAI,IAAIM,CAAC,GAAC2B,CAAC,CAACjC,GAAF,GAAM,CAAhB,EAAkBM,CAAC,GAAC2B,CAAC,CAACxC,MAAF,CAASD,QAAT,CAAkBS,MAAtC,EAA6CK,CAAC,EAA9C,EAAiD;AAIzC,QAAG2B,CAAC,CAAC1C,IAAF,CAAOuC,SAAP,KAAmBG,CAAC,CAACxC,MAAF,CAASD,QAAT,CAAkBc,CAAlB,EAAqBf,IAArB,CAA0BuC,SAAhD,EAA0D;AAE1D,UAAG5B,YAAY,CAAC+B,CAAC,CAAC1C,IAAF,CAAOwC,SAAR,EAAkBE,CAAC,CAACxC,MAAF,CAASD,QAAT,CAAkBc,CAAlB,EAAqBf,IAArB,CAA0BwC,SAA5C,CAAf,EACI;AAEIE,QAAAA,CAAC,CAACrC,MAAF,CAASqC,CAAC,CAACxC,MAAF,CAASD,QAAT,CAAkBc,CAAlB,EAAqBf,IAA9B;AACAS,QAAAA,GAAG;AAEN;AACJ;AAER;;AAAA;;AAID,MAAGA,GAAG,KAAG,CAAT,EAAiB;AACb;AACI,UAAGsB,IAAI,CAACC,GAAL,GAASY,CAAZ,EACIb,IAAI,CAACC,GAAL,GAASY,CAAT;AAEJ,UAAGb,IAAI,CAACE,QAAL,GAAcS,CAAC,CAACvC,KAAnB,EACI4B,IAAI,CAACE,QAAL,GAAcS,CAAC,CAACvC,KAAhB;AAGJuC,MAAAA,CAAC,CAACC,IAAF,GAAOC,CAAP,CARJ,CAWI;;AACAF,MAAAA,CAAC,CAACI,IAAF,GAAO,EAAP;AACA,UAAIC,KAAK,GAACL,CAAV;;AACA,WAAI,IAAIJ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACI,CAAC,CAACC,IAAhB,EAAqBL,CAAC,EAAtB,EAAyB;AAErBI,QAAAA,CAAC,CAACI,IAAF,CAAOtC,IAAP,CAAYuC,KAAZ;AACAA,QAAAA,KAAK,GAACA,KAAK,CAAC7C,MAAZ;AAGH;;AAED6B,MAAAA,IAAI,CAACG,UAAL,CAAgB1B,IAAhB,CAAqBkC,CAArB;AAGA;AAEH,KA5BL,MA6BK;AAED,SAAI,IAAI3B,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACN,GAAd,EAAkBM,CAAC,EAAnB,EACA;AACIqB,MAAAA,MAAM,CAACM,CAAC,CAACzC,QAAF,CAAWc,CAAX,CAAD,EAAe6B,CAAC,GAAC,CAAjB,EAAmBb,IAAnB,CAAN;AAEH;AAEJ;AAEJ,CAjEM;AAoEP,eAAejC,IAAf","sourcesContent":["\r\n\r\n\r\nexport class Node {\r\n\r\n    constructor(data){\r\n\r\n        this.data=data;\r\n        this.children=[];\r\n        this.adault=null;\r\n        this.score=0;\r\n        this.maxrootlist=[];\r\n    \r\n    }\r\n\r\n\r\n   insert(data){\r\n\r\n    const node=new Node(data);\r\n    node.adault=this;\r\n    \r\n    node.score=node.adault.score+data.classscore;  // 누적 학점\r\n\r\n    this.children.push(node);\r\n    node.num=this.children.length-1;\r\n\r\n  \r\n    \r\n   }\r\n   \r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n//둘의 시간이 겹치는지 확인\r\n//안겹치면 true 반환\r\n// 시간표를 넘겨줘야함\r\nexport const lookschedule= function(a,b){\r\n\r\n    if(a.t1.length && b.t1.length)\r\n        {   \r\n                for(let i=0;i<a.t1.length;i++){\r\n                    \r\n                    if(b.t1.indexOf(a.t1[i])!==-1)\r\n                        return false;\r\n                        \r\n                }\r\n\r\n        }\r\n\r\n    if(a.t2.length && b.t2.length)\r\n    {   \r\n            for(let i=0;i<a.t2.length;i++){\r\n                \r\n                if(b.t2.indexOf(a.t2[i])!==-1)\r\n                    return false;\r\n                    \r\n            }\r\n    }\r\n\r\n    if(a.t3.length && b.t3.length)\r\n    {   \r\n            for(let i=0;i<a.t3.length;i++){\r\n                \r\n                if(b.t3.indexOf(a.t3[i])!==-1)\r\n                    return false;\r\n                    \r\n            }\r\n    }\r\n\r\n    if(a.t4.length && b.t4.length)\r\n    {   \r\n            for(let i=0;i<a.t4.length;i++){\r\n                \r\n                if(b.t4.indexOf(a.t4[i])!==-1)\r\n                    return false;\r\n                 \r\n            }\r\n\r\n    }\r\n\r\n    if(a.t5.length && b.t5.length)\r\n    {   \r\n            for(let i=0;i<a.t5.length;i++){\r\n                \r\n                if(b.t5.indexOf(a.t5[i])!==-1)\r\n                    return false;\r\n                   \r\n            }\r\n\r\n    }\r\n\r\n\r\n    return true;\r\n\r\n\r\n\r\n};\r\n\r\n\r\n\r\n// 안겹친다는 가정이 필요\r\n// 안겹치고 이 함수를 사용하면 dst 시간표에 src가 추가됨. \r\n// 시간표와, 시간표에 넣을 과목을 dst, src 차례로 주면됨\r\nexport const insertTable=function(dst,src){\r\n\r\n    \r\n    for(let i=0;i<src.keyword.length;i++){\r\n\r\n        dst[src.keyword[i]]=dst[src.keyword[i]].concat(src[src.keyword[i]]);\r\n        \r\n    };\r\n\r\n\r\n};\r\n\r\n\r\nexport const composeTree=function(t,table,banlist,rootdata=null){\r\n\r\n  \r\n    const root= new Node(rootdata);\r\n\r\n    root.max=0;\r\n    root.maxScore=0;\r\n\r\n    root.finalTable=[];\r\n    \r\n    // //실패시 대안 루트 만들어줌.\r\n    // if(rootdata!==null){\r\n        \r\n    //     root.idlist=[];\r\n    //     root.idlist.push(rootdata.id);\r\n        \r\n    //     root.playlist=[]; // type1,2,3 가능한것들  \r\n\r\n    //     for(let i=0;i<table.type1.length;i++){\r\n                \r\n    //         let t=0;\r\n              \r\n    //         if(table.type1[i].id===rootdata.id)\r\n    //             continue;\r\n\r\n    //         for( let j=0;j<banlist.length;j++){\r\n\r\n    //             if(banlist[j].data.classname!==table.type1[i].classname)\r\n    //             {\r\n    //                 if(lookschedule(banlist[j].data.classtime,table.type1[i].classtime))\r\n    //                    {\r\n    //                         t++;\r\n\r\n    //                    }\r\n                    \r\n\r\n    //             }\r\n\r\n\r\n\r\n    //         }\r\n\r\n    //         if(t===banlist.length)\r\n    //             {\r\n    //                 root.insert(table.type1[i]);\r\n    //                 root.playlist.push(table.type1[i]);\r\n    //             }\r\n\r\n    //     }\r\n\r\n\r\n    //     for(let i=0;i<table.type2.length;i++){\r\n                \r\n    //         let t=0;\r\n              \r\n    //         if(table.type2[i].id===rootdata.id)\r\n    //             continue;\r\n\r\n    //         for( let j=0;j<banlist.length;j++){\r\n\r\n    //             if(banlist[j].data.classname!==table.type2[i].classname)\r\n    //             {\r\n    //                 if(lookschedule(banlist[j].data.classtime,table.type2[i].classtime))\r\n    //                    {\r\n    //                         t++;\r\n\r\n    //                    }\r\n                    \r\n\r\n    //             }\r\n\r\n\r\n\r\n    //         }\r\n\r\n    //         if(t===banlist.length)\r\n    //             {\r\n    //                 root.insert(table.type2[i]);\r\n    //                 root.playlist.push(table.type2[i]);\r\n    //             }\r\n    //     }\r\n\r\n\r\n    //     for(let i=0;i<table.type3.length;i++){\r\n                \r\n    //         let t=0;\r\n              \r\n    //         if(table.type3[i].id===rootdata.id)\r\n    //             continue;\r\n\r\n    //         for( let j=0;j<banlist.length;j++){\r\n\r\n    //             if(banlist[j].data.classname!==table.type3[i].classname)\r\n    //             {\r\n    //                 if(lookschedule(banlist[j].data.classtime,table.type3[i].classtime))\r\n    //                    {\r\n    //                         t++;\r\n\r\n    //                    }\r\n                    \r\n\r\n    //             }\r\n\r\n\r\n\r\n    //         }\r\n\r\n    //         if(t===banlist.length)\r\n    //             {   \r\n    //                 root.insert(table.type3[i]);\r\n    //                 root.playlist.push(table.type3[i]);\r\n    //             }\r\n\r\n    //     }\r\n\r\n\r\n    //     for(let i=0;i<root.children.length;i++){\r\n    \r\n    //         search(root.children[i],2,root,true);\r\n           \r\n    //     }\r\n\r\n\r\n\r\n    // } //rootdata!==null 끝 \r\n\r\n    \r\n    // else {\r\n    if(t==='type1')\r\n        {\r\n    //루트 바로 밑 1번째 자식들 구성\r\n    for(let i=0;i<table.type1.length;i++){\r\n\r\n        root.insert(table.type1[i]);\r\n      \r\n    }\r\n\r\n\r\n    for(let i=0;i<table.type1.length;i++){\r\n\r\n        search(root.children[i],1,root);\r\n       \r\n    }\r\n\r\n\r\n        }\r\n\r\n    else if(t==='type2'){\r\n\r\n      \r\n        \r\n        for(let i=0;i<table.type2.length;i++){\r\n            \r\n            if(banlist.length===0)\r\n                root.insert(table.type2[i]);\r\n            \r\n            else {\r\n                let t=0;\r\n              \r\n                for( let j=0;j<banlist.length;j++){\r\n\r\n                    if(banlist[j].data.classname!==table.type2[i].classname)\r\n                    {\r\n                        if(lookschedule(banlist[j].data.classtime,table.type2[i].classtime))\r\n                           {\r\n                                t++;\r\n\r\n                           }\r\n                        \r\n\r\n                    }\r\n\r\n\r\n                }\r\n\r\n                if(t===banlist.length)\r\n                    root.insert(table.type2[i]);\r\n\r\n              \r\n\r\n\r\n            }\r\n    \r\n       \r\n        }\r\n    \r\n   \r\n    \r\n    \r\n        for(let i=0;i<root.children.length;i++){\r\n    \r\n            search(root.children[i],1,root);\r\n           \r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    else if(t==='type3'){\r\n\r\n        for(let i=0;i<table.type3.length;i++){\r\n\r\n    \r\n            if(banlist.length===0)\r\n            root.insert(table.type3[i]);\r\n        \r\n        else {\r\n            let t=0;\r\n          \r\n            for( let j=0;j<banlist.length;j++){\r\n\r\n                if(banlist[j].data.classname!==table.type3[i].classname)\r\n                {\r\n                    if(lookschedule(banlist[j].data.classtime,table.type3[i].classtime))\r\n                       {\r\n                            t++;\r\n\r\n                       }\r\n                    \r\n\r\n                }\r\n\r\n\r\n            }\r\n\r\n            if(t===banlist.length)\r\n                root.insert(table.type3[i]);\r\n\r\n          \r\n\r\n\r\n        }\r\n    \r\n       \r\n          \r\n        }\r\n    \r\n            \r\n\r\n        for(let i=0;i<root.children.length;i++){\r\n    \r\n            search(root.children[i],1,root);\r\n           \r\n        }\r\n\r\n\r\n    // }\r\n\r\n    }\r\n\r\n    for(let i=0;i<root.finalTable.length;i++){\r\n\r\n            \r\n        let n=root.finalTable[i];\r\n\r\n        if(n.deep===root.max){\r\n\r\n            root.maxrootlist.push(n);\r\n        }\r\n\r\n    }\r\n \r\n\r\nreturn root;\r\n\r\n};\r\n\r\nexport const search=function(n,k,root,tf=false,banlist){\r\n\r\n \r\n    let num=0;\r\n\r\n    \r\n\r\n    for(let i=n.num+1;i<n.adault.children.length;i++){\r\n\r\n        \r\n\r\n            if(n.data.classname!==n.adault.children[i].data.classname){\r\n\r\n            if(lookschedule(n.data.classtime,n.adault.children[i].data.classtime))\r\n                {   \r\n                    \r\n                    n.insert(n.adault.children[i].data);\r\n                    num++;\r\n\r\n                }\r\n            }\r\n                   \r\n    };\r\n\r\n\r\n\r\n    if(num===0)      //지금 이 노드가 leaf라는 소리\r\n        {   \r\n            if(root.max<k)\r\n                root.max=k;\r\n            \r\n            if(root.maxScore<n.score)\r\n                root.maxScore=n.score;\r\n\r\n\r\n            n.deep=k;\r\n\r\n\r\n            // 리프는 root->자기로 향하는 노드들의 리스트를 따로 저장함.\r\n            n.list=[];\r\n            let tempn=n;\r\n            for(let j=0;j<n.deep;j++){\r\n\r\n                n.list.push(tempn);\r\n                tempn=tempn.adault;\r\n\r\n\r\n            }\r\n\r\n            root.finalTable.push(n);\r\n\r\n\r\n            return;\r\n\r\n        }\r\n    else {\r\n\r\n        for(let i=0;i<num;i++)\r\n        {\r\n            search(n.children[i],k+1,root);\r\n\r\n        }\r\n\r\n    }\r\n\r\n};\r\n\r\n\r\nexport default Node;\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}